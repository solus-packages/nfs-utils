name       : nfs-utils
version    : 2.1.1
release    : 7
source     :
    - http://internode.dl.sourceforge.net/project/nfs/nfs-utils/2.1.1/nfs-utils-2.1.1.tar.bz2 : 0a28416948516c26f3bfe90425b0de09b79364dc1f508bf1dda8de66e1edbb09
license    : GPL-2.0
summary    : Network File System Utilities
description: |
    Network File System Utilities
component  : network.utils
builddeps  :
    - pkgconfig(devmapper)
    - pkgconfig(libcap)
    - pkgconfig(libevent)
    - pkgconfig(libnfsidmap)
    - pkgconfig(sqlite3)
    - pkgconfig(libtirpc)
    - pkgconfig(krb5)
    - pkgconfig(com_err)
    - pkgconfig(mount)
rundeps    :
    - rpcbind
setup      : |
    %patch -p1 < $pkgfiles/0001-Add-dependency-to-network-online-to-rpc-gssd.patch

    %configure \
      --without-tcp-wrappers \
      --with-systemd=/usr/lib/systemd/system \
      --with-statedir=/run/nfs \
      --with-krb5=/usr/lib/krb5 \
      --enable-libmount-mount \
      --enable-svcgss # Required if gssproxy is not available
build      : |
    %make
install    : |
    %make_install
    install -D -d -m 00755 $installdir/%libdir%/systemd/system/
    install -m 00644 systemd/*.mount systemd/*.target systemd/*.service $installdir/%libdir%/systemd/system/
    # Configure enabling this by default once we have testing!

    # Dirs
    rm -rf $installdir/var
    install -D -m 00644 $pkgfiles/nfs-utils.tmpfiles $installdir/%libdir%/tmpfiles.d/nfs-utils.conf
